<!-- game/templates/game/tournament/detail_local_tournament.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Détail du Tournoi</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script>
    // Au bout de 3 secondes, on supprime la classe 'd-none' pour afficher le bouton
    window.onload = function(){
      setTimeout(function(){
        let btn = document.getElementById('nextStepBtn');
        if(btn) { btn.classList.remove('d-none'); }
      }, 3000);
    }
    </script>
</head>
<body class="container mt-5">

<h1>Détail du tournoi : {{ tournament.name }}</h1>

<div>
    <h3>1re demi-finale : {{ tournament.player1 }} vs {{ tournament.player2 }}</h3>
    {% if semifinal1_result %}
        <p>Résultat : {{ semifinal1_result.winner }} a gagné</p>
    {% else %}
        <p>Pas encore joué.</p>
    {% endif %}
</div>

<div>
    <h3>2e demi-finale : {{ tournament.player3 }} vs {{ tournament.player4 }}</h3>
    {% if semifinal2_result %}
        <p>Résultat : {{ semifinal2_result.winner }} a gagné</p>
    {% else %}
        <p>Pas encore joué.</p>
    {% endif %}
</div>

<div>
    <h3>Finale :</h3>
    {% if final_result %}
        <p>Résultat : {{ final_result.winner }} a gagné la finale !</p>
    {% elif tournament.final %}
        <p>Finale en cours ou pas encore terminée.</p>
    {% else %}
        <p>Pas encore définie.</p>
    {% endif %}
</div>

<!-- Bouton caché pendant 3 sec, puis apparaît -->
{% if tournament.status == 'pending' %}
    <!-- Prochaine étape : préparer la 1re demi-finale -->
    <a id="nextStepBtn" class="btn btn-primary d-none"
       href="{% url 'next_game_presentation_tournament' tournament.id 'semifinal1' %}">
       Passer à la demi-finale 1
    </a>
{% elif tournament.status == 'semifinal1_done' %}
    <a id="nextStepBtn" class="btn btn-warning d-none"
       href="{% url 'next_game_presentation_tournament' tournament.id 'semifinal2' %}">
       Passer à la demi-finale 2
    </a>
{% elif tournament.status == 'semifinal2_done' %}
    <a id="nextStepBtn" class="btn btn-success d-none"
       href="{% url 'next_game_presentation_tournament' tournament.id 'final' %}">
       Passer à la Finale
    </a>
{% elif tournament.status == 'finished' %}
    <p>Tournoi terminé !</p>
{% else %}
    <p>En cours : {{ tournament.status }}</p>
{% endif %}

</body>
</html>
